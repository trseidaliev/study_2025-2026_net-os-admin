---
lang: ru-RU
title: Администрирование сетевых подсистем
subtitle: Настройка файловых служб Samba
author:
  - Сейдалиев Тагиетдин Ровшенович
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 08 декабря 2025
toc: false
slide_level: 2
aspectratio: 169
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цель работы

## Основная цель

Получить навыки настройки доступа групп пользователей  
к общим ресурсам по протоколу SMB (Samba).

# Настройка сервера Samba

## Установка пакетов

- Установлены компоненты *samba*, *samba-client*, *cifs-utils*
- Подготовка окружения сервера для работы файлового сервиса

![Установка пакетов Samba](Screenshot_1.png){ width=80% }

## Пользователи и группы

- Создана группа **sambagroup (GID 1010)**
- Пользователь **trseidaliev** добавлен в группу
- Создан каталог общего доступа: `/srv/sambashare`

![smb.conf](Screenshot_2.png){ width=75% }

## Проверка работоспособности SMB

- Служба **smb** запущена и добавлена в автозагрузку
- Проверка статуса показала, что сервис активен

![Статус службы SMB](Screenshot_3.png){ width=90% }

## Разрешение Samba в firewalld

- Просмотр конфигурации samba.xml
- Разрешены сервисы Samba в firewalld
- Выполнен reload firewall

![Профиль Samba](Screenshot_4.png){ width=85% }

## Контекст и права доступа

- Каталогу назначена группа *sambagroup*
- Установлен контекст: `samba_share_t`
- Разрешён экспорт для чтения и записи

![SELinux](Screenshot_5.png){ width=80% }

## Создание файла пользователем

Пользователь **trseidaliev** создал файл в общем каталоге — доступ подтверждён.

![Создание файла](Screenshot_7.png){ width=80% }

# Настройка клиента Samba

## Установка компонентов

- Установлены пакеты *samba-client* и *cifs-utils*
- Настроен межсетевой экран клиента

![Профиль samba-client](Screenshot_9.png){ width=90% }

## smbclient

- Анонимное подключение к серверу
- Подключение под пользователем **trseidaliev**

![Результат smbclient](Screenshot_11.png){ width=80% }

## Ручное монтирование

- Создан каталог `/mnt/samba`
- Ресурс смонтирован вручную под пользователем
- Запись файла подтверждает доступ

![Монтирование ресурса](Screenshot_12.png){ width=85% }

## Файл учётных данных и fstab

- Создан файл `/etc/samba/smbusers`
- Запись в `/etc/fstab` обеспечивает автоподключение ресурса
- Проверка через `mount -a` успешна

![fstab Samba](Screenshot_15.png){ width=90% }

# Итоги работы

## Основные результаты

- Настроен полноценный Samba-сервер
- Создан общий ресурс с разграничением прав
- Настроен SELinux и межсетевой экран
- Выполнена проверка доступа с клиента
- Реализовано автоматическое монтирование ресурса
- Созданы скрипты провижининга для серверной и клиентской машин
